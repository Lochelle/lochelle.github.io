<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/style.css">
    <title>Apple Cider</title>
</head>
<body>
    <div class="container-fluid">
        <h2>Project Apple Cider</h2>
        <div class="row w-100 pt-2">
            <h4 class="pt-4">3.1.1.a - Equal Duration Model</h4>
            <img src="resource/eq_model.png" alt="img-thumbnail" class="img_thumbnail">
            <div class="input-group input-group-sm">
                <span class="input-group-text equal_model_label" id="input-group-sm-example">S(n)</span>
                <input type="text" class="form-control equal_model_textbox" aria-label="Small input group" aria-describedby="input-group-sm" placeholder="Speedup factor">
            </div>
            <div class="input-group input-group-sm pt-2">
                <span class="input-group-text equal_model_label" id="input-group-sm-example">n:</span>
                <input type="text" class="form-control equal_model_textbox" aria-label="Small input group" aria-describedby="input-group-sm" placeholder="number of processors">
            </div>
            <div class="input-group input-group-sm pt-2">
                <span class="input-group-text equal_model_label" id="input-group-sm-example">ts: </span>
                <input type="text" class="form-control equal_model_textbox" aria-label="Small input group" aria-describedby="input-group-sm" placeholder="Execution time/processor">
            </div>
            <div class="input-group input-group-sm pt-2">
                <input type="button" value="Solve" class="btn btn-warning" id="equal_model_btn">
            </div>
        </div>
        <div class="row w-100 pt-2">
            <h4 class="pt-4">3.1.1.b - Equal Duration Model with overhead</h4>
            <img src="resource/eq_model_tc.png"alt="img-fluid">
            <img src="resource/eq_model_tc_eff.png" alt="img-fluid">
            <div class="input-group input-group-sm">
                <span class="input-group-text equal_model_tc_label" id="input-group-sm-example">S(n)</span>
                <input type="text" class="form-control equal_model_tc_textbox" aria-label="Small input group" aria-describedby="input-group-sm" placeholder="Speedup factor">
            </div>
            <div class="input-group input-group-sm pt-2">
                <span class="input-group-text equal_model_tc_label" id="input-group-sm-example">n:</span>
                <input type="text" class="form-control equal_model_tc_textbox" aria-label="Small input group" aria-describedby="input-group-sm" placeholder="number of processors">
            </div>
            <div class="input-group input-group-sm pt-2">
                <span class="input-group-text equal_model_tc_label" id="input-group-sm-example">ts: </span>
                <input type="text" class="form-control equal_model_tc_textbox" aria-label="Small input group" aria-describedby="input-group-sm"  placeholder="Execution time/processor">
            </div>
            <div class="input-group input-group-sm pt-2">
                <span class="input-group-text equal_model_tc_label" id="input-group-sm-example">tc: </span>
                <input type="text" class="form-control equal_model_tc_textbox" aria-label="Small input group" aria-describedby="input-group-sm" placeholder="overhead">
            </div>
            <div class="input-group input-group-sm pt-2">
                <span class="input-group-text equal_model_tc_label_eff" id="input-group-sm-example">eff: </span>
                <input type="text" class="form-control equal_model_tc_textbox_eff" aria-label="Small input group" aria-describedby="input-group-sm" placeholder="efficency" disabled >
            </div>
            <div class="input-group input-group-sm pt-2">
                <input type="button" value="Solve" class="btn btn-warning" id="equal_model_tc_btn">
            </div>
        </div>
        <div class="row w-100 pt-2">
            <h4 class="pt-4">3.1.2.a - Parallel Computation with Serial Sections Model</h4>
            <img src="resource/parallel_model.png"alt="img-fluid">
            <img src="resource/parallel_model_eff.png" alt="img-fluid">
            <div class="input-group input-group-sm">
                <span class="input-group-text parallel_model" id="input-group-sm-example">S(n)</span>
                <input type="text" class="form-control parallel_model_textbox" aria-label="Small input group" aria-describedby="input-group-sm" placeholder="Speedup factor">
            </div>
            <div class="input-group input-group-sm pt-2">
                <span class="input-group-text parallel_model" id="input-group-sm-example">n:</span>
                <input type="text" class="form-control parallel_model_textbox" aria-label="Small input group" aria-describedby="input-group-sm" placeholder="number of processors">
            </div>
            <div class="input-group input-group-sm pt-2">
                <span class="input-group-text parallel_model" id="input-group-sm-example">ts: </span>
                <input type="text" class="form-control parallel_model_textbox" aria-label="Small input group" aria-describedby="input-group-sm" placeholder="Execution time/processor">
            </div>
            <div class="input-group input-group-sm pt-2">
                <span class="input-group-text parallel_model" id="input-group-sm-example">f: </span>
                <input type="text" class="form-control parallel_model_textbox" aria-label="Small input group" aria-describedby="input-group-sm" placeholder="not dividable into subtask">
            </div>
            <div class="input-group input-group-sm pt-2">
                <span class="input-group-text parallel_model_eff" id="input-group-sm-example">eff: </span>
                <input type="text" class="form-control parallel_model_textbox_eff" aria-label="Small input group" aria-describedby="input-group-sm" placeholder="efficency" disabled>
            </div>
            <div class="input-group input-group-sm pt-2">
                <input type="button" value="Solve" class="btn btn-warning" id="parallel_model_btn">
            </div>
        </div>
    </div>

    
<!--<script src="/_scripts/script.js" type="text/javascript"> </script>-->
<script>
    document.addEventListener("DOMContentLoaded", (e)=>{
    console.log("No this isn't for you")

    let equal_model = document.getElementsByClassName('equal_model_textbox')
    let equal_model_btn = document.getElementById('equal_model_btn')
    let equal_model_label = document.getElementsByClassName('equal_model_label')
    equal_model_btn.addEventListener('click', (e)=>{
        func_equal_model(equal_model,equal_model_label);
    })

    let equal_model_tc = document.getElementsByClassName("equal_model_tc_textbox")
    let equal_model_tc_btn = document.getElementById("equal_model_tc_btn")
    let equal_model_tc_label = document.getElementsByClassName("equal_model_tc_label")
    let equal_model_tc_textbox_eff = document.getElementsByClassName("equal_model_tc_textbox_eff")
    equal_model_tc_btn.addEventListener('click', (e)=>{
        func_equal_model_tc(equal_model_tc, equal_model_tc_label, equal_model_tc_textbox_eff)
    })

    let parallel_model = document.getElementsByClassName('parallel_model_textbox')
    let parallel_model_btn = document.getElementById("parallel_model_btn")
    let parallel_model_label = document.getElementsByClassName("parallel_model")
    let parallel_model_eff = document.getElementsByClassName("parallel_model_textbox_eff")
    parallel_model_btn.addEventListener('click', ()=>{
        func_parallel_model(parallel_model, parallel_model_label, parallel_model_eff)
    })
});
let func_equal_model = (equal_model, equal_model_label)=>{

    if(Array.from(equal_model).some((x) => !x.value))
        texts_def(equal_model_label)
    if (!equal_model[0].value && equal_model[1].value && equal_model[2].value)
    {
       
        let n = parseFloat(equal_model[1].value)
        let ts = parseFloat(equal_model[2].value)
        equal_model_label[0].classList.add('answer')
        equal_model[0].value = ts/parseFloat(ts/n)
    }
    else if (equal_model[0].value && !equal_model[1].value && equal_model[2].value)
    {
        let sn = parseFloat(equal_model[0].value)
        let ts = parseFloat(equal_model[2].value)
        equal_model_label[1].classList.add('answer')
        equal_model[1].value = parseFloat(sn)
    }
}

let func_equal_model_tc = (equal_model_tc, equal_model_tc_label,a )=>{
    if(Array.from(equal_model_tc).some((x) => !x.value))
        texts_def(equal_model_tc_label)
    if (!equal_model_tc[0].value && equal_model_tc[1].value && equal_model_tc[2].value && equal_model_tc[3].value)
    {
        let n = parseFloat(equal_model_tc[1].value)
        let ts = parseFloat(equal_model_tc[2].value)
        let tc = parseFloat(equal_model_tc[3].value)
        equal_model_tc_label[0].classList.add('answer')
        equal_model_tc[0].value = n/parseFloat(1+n*(tc/ts))
    }
    else if (equal_model_tc[0].value && !equal_model_tc[1].value && equal_model_tc[2].value && equal_model_tc[3].value)
    {
        let sn = parseFloat(equal_model_tc[0].value)
        let ts = parseFloat(equal_model_tc[2].value)
        let tc = parseFloat(equal_model_tc[3].value)
        equal_model_tc_label[1].classList.add('answer')
        equal_model_tc[1].value = Math.round((sn*ts)/parseFloat(ts-sn*tc))
    }
    else if (equal_model_tc[0].value && equal_model_tc[1].value && !equal_model_tc[2].value && equal_model_tc[3].value)
    {
        let sn = parseFloat(equal_model_tc[0].value)
        let n = parseFloat(equal_model_tc[1].value)
        let tc = parseFloat(equal_model_tc[3].value)
        equal_model_tc_label[2].classList.add('answer')
        equal_model_tc[2].value = (sn*n*tc)/(n-sn)
    }
    else if (equal_model_tc[0].value && equal_model_tc[1].value && equal_model_tc[2].value && !equal_model_tc[3].value)
    {
        let sn = parseFloat(equal_model_tc[0].value)
        let n = parseFloat(equal_model_tc[1].value)
        let ts = parseFloat(equal_model_tc[2].value)
        equal_model_tc_label[3].classList.add('answer')
        equal_model_tc[3].value = ((n*ts)-(sn*ts))/parseFloat(sn*n)
    }

    if(Array.from(equal_model_tc).every((x) => x.value))
        computeEff_equal_model_tc(equal_model_tc, a)
    
}
let = func_parallel_model=(parallel_model, parallel_model_label, a) =>{
    if(Array.from(parallel_model).some((x) => !x.value))
        texts_def(parallel_model_label)
    
    if (!parallel_model[0].value && parallel_model[1].value && parallel_model[2].value && parallel_model[3].value)
    {
        let n = parseFloat(parallel_model[1].value)
        let ts = parseFloat(parallel_model[2].value)
        let f = parseFloat(parallel_model[3].value)
        parallel_model_label[0].classList.add('answer')
        parallel_model[0].value = n/parseFloat((1+(n-1)*f))
    }
    else if (parallel_model[0].value && !parallel_model[1].value && parallel_model[2].value && parallel_model[3].value)
    {
        let sn = parseFloat(parallel_model[0].value)
        let ts = parseFloat(parallel_model[2].value)
        let f = parseFloat(parallel_model[3].value)
        parallel_model_label[1].classList.add('answer')
        parallel_model[1].value = Math.round((sn-f*sn)/parseFloat((1-f*sn)))
    }
    else if (parallel_model[0].value && parallel_model[1].value && parallel_model[2].value && !parallel_model[3].value)
    {
        let sn = parseFloat(parallel_model[0].value)
        let n = parseFloat(parallel_model[1].value)
        let ts = parseFloat(parallel_model[2].value)
        parallel_model_label[3].classList.add('answer')
        parallel_model[3].value = (n-sn)/parseFloat((sn*n)-sn)
    }
    if(Array.from(parallel_model).every((x) => x.value))
        computeEff_parallel_model(parallel_model, a)
}
let computeEff_equal_model_tc = (x, a)=>{
    let sn = parseFloat(x[0].value)
    let n = parseFloat(x[1].value)
    let ts = parseFloat(x[2].value)
    let tc = parseFloat(x[2].value)
    a[0].value = 1/parseFloat((1+n*(tc/ts)))
}
let computeEff_parallel_model = (x, a)=>{
    let sn = parseFloat(x[0].value)
    let n = parseFloat(x[1].value)
    let ts = parseFloat(x[2].value)
    let tc = parseFloat(x[2].value)
    let f = parseFloat(x[3].value)
    a[0].value = 1/parseFloat((1+(n-1)*f))
}


let texts_def = (x)=>{
    for (let c of x)
        if (c.classList.contains('answer'))
            c.classList.remove('answer')
}
</script>
</body>
</html>